zabbix_export:
  version: '5.4'
  date: '2022-02-14T20:04:54Z'
  groups:
    -
      uuid: 57b7ae836ca64446ba2c296389c009b7
      name: Templates/Modules
  templates:
    -
      uuid: d42ce13262a94f16954e7a80df009d59
      template: CISCO-STACK-SNMP
      name: CISCO-STACK-SNMP
      description: |
        Template for monitoring the current state (stackwise) of a switch.
        
        Vendor: Cisco
        Module: CISCO-STACKWISE-MIB
        
        -- JÃ¸rn Ivar Holland
      groups:
        -
          name: Templates/Modules
      discovery_rules:
        -
          uuid: 8189f21c1d064ad9bbc6d5c297d591cb
          name: 'Stack Discovery'
          type: SNMP_AGENT
          snmp_oid: 'discovery[{#SENSOR_INFO},1.3.6.1.4.1.9.9.500.1.2.1.1.1]'
          key: SwitchStackState.discovery
          delay: 6h
          lifetime: 7d
          description: |
            This object (#SWITCHNUMBER) contains the current switch identification number.
            This number should match any logical labeling on the switch.
            For example, a switch whose interfaces are labeled 'interface #3' this value should be 3.
          item_prototypes:
            -
              uuid: 989bb0170c524f3bb5b81806f6054342
              name: 'State of switch number {#SENSOR_INFO}'
              type: SNMP_AGENT
              snmp_oid: '1.3.6.1.4.1.9.9.500.1.2.1.1.6.{#SNMPINDEX}'
              key: 'cswSwitchState[{#SNMPINDEX}]'
              delay: 3m
              history: 7d
              description: |
                The current state (stackwise) of a switch.
                
                Vendor: Cisco
                Module: CISCO-STACKWISE-MIB (MIB not required)
              tags:
                -
                  tag: Application
                  value: 'Stack Status'
              trigger_prototypes:
                -
                  uuid: b41f510f4b31462980175b792b5978ef
                  expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=3'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=4'
                  name: 'Stack is not operational: switch {#SENSOR_INFO} is in state added'
                  priority: HIGH
                  description: 'The switch is added to the stack.'
                -
                  uuid: dd726729c8c4449dbe21c4b462d30029
                  expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=7'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=4'
                  name: 'Stack is not operational: switch {#SENSOR_INFO} is in state featureMismatch'
                  priority: HIGH
                  description: 'Some of the features configured on the master are not supported on this member.'
                  manual_close: 'YES'
                -
                  uuid: e7204991121d48c88577d710d15deacf
                  expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=10'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=4'
                  name: 'Stack is not operational: switch {#SENSOR_INFO} is in state invalid'
                  priority: HIGH
                  description: 'The switch''s state machine is in an invalid state.'
                  manual_close: 'YES'
                -
                  uuid: 70477dd5de7243289a8ac05ee9782875
                  expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=8'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=4'
                  name: 'Stack is not operational: switch {#SENSOR_INFO} is in state newMasterInit'
                  priority: HIGH
                  description: 'Waiting for the new master to finish initialization after master switchover (Master Re-Init).'
                  manual_close: 'YES'
                -
                  uuid: fd4caf4d6c4940e3ba23187ee98dd980
                  expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=2'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=4'
                  name: 'Stack is not operational: switch {#SENSOR_INFO} is in state progressing'
                  priority: HIGH
                  description: 'Master election or mismatch checks in progress.'
                  manual_close: 'YES'
                -
                  uuid: 184d8371fc2346f2a3fbfd60681ad3c0
                  expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=9'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=4'
                  name: 'Stack is not operational: switch {#SENSOR_INFO} is in state provisioned'
                  priority: HIGH
                  description: 'The switch is not an active member of the stack.'
                  manual_close: 'YES'
                -
                  uuid: 33bfc47926fa4eedbe140a2828aea4da
                  expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=11'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=4'
                  name: 'Stack is not operational: switch {#SENSOR_INFO} is in state removed'
                  priority: HIGH
                  description: 'The switch is removed from the stack.'
                  manual_close: 'YES'
                -
                  uuid: b05372f6d35541d0b219cf677ab7c2dd
                  expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=5'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=4'
                  name: 'Stack is not operational: switch {#SENSOR_INFO} is in state sdmMismatch'
                  priority: HIGH
                  description: 'The SDM template configured on the master is not supported by the new member.'
                  manual_close: 'YES'
                -
                  uuid: 21f0673ffcc3447d94706c5886f35fcf
                  expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=6'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=4'
                  name: 'Stack is not operational: switch {#SENSOR_INFO} is in state verMismatch'
                  priority: HIGH
                  description: 'The operating system version running on the master is different from the operating system version running on this member.'
                  manual_close: 'YES'
                -
                  uuid: 3b207e3ad0e047fbbea4ef772cf75e87
                  expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=1'
                  recovery_mode: RECOVERY_EXPRESSION
                  recovery_expression: 'last(/CISCO-STACK-SNMP/cswSwitchState[{#SNMPINDEX}])=4'
                  name: 'Stack is not operational: switch {#SENSOR_INFO} is in state waiting'
                  priority: HIGH
                  description: 'Waiting for a limited time on other switches in the stack to come online.'
                  manual_close: 'YES'
